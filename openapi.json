{"openapi":"3.1.0","info":{"title":"NKU-Wiki API","description":"南开大学知识维基项目","version":"1.0.0"},"paths":{"/api/knowledge/search-advanced":{"get":{"tags":["knowledge"],"summary":"高级搜索，使用可配置的检索和重排策略，提供更精准的结果","description":"高级搜索，使用可配置的检索和重排策略，提供更精准的结果。","operationId":"advanced_search_endpoint_api_knowledge_search_advanced_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"top_k_retrieve","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"召回文档数量，建议值[10, 50]","default":20,"title":"Top K Retrieve"},"description":"召回文档数量，建议值[10, 50]"},{"name":"top_k_rerank","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"重排文档数量，建议值[5, 20]","default":10,"title":"Top K Rerank"},"description":"重排文档数量，建议值[5, 20]"},{"name":"retrieval_strategy","in":"query","required":false,"schema":{"$ref":"#/components/schemas/RetrievalStrategy","description":"检索策略：auto-自动, hybrid-混合, vector_only-仅向量, bm25_only-仅BM25, es_only-仅ES","default":"auto"},"description":"检索策略：auto-自动, hybrid-混合, vector_only-仅向量, bm25_only-仅BM25, es_only-仅ES"},{"name":"rerank_strategy","in":"query","required":false,"schema":{"$ref":"#/components/schemas/RerankStrategy","description":"重排策略：no_rerank-不重排, bge_reranker-BGE模型, st_reranker-SentenceTransformer, personalized-个性化","default":"bge_reranker"},"description":"重排策略：no_rerank-不重排, bge_reranker-BGE模型, st_reranker-SentenceTransformer, personalized-个性化"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/search-general":{"get":{"tags":["knowledge"],"summary":"通用搜索接口，使用Elasticsearch检索，不带向量检索和重排，适用于快速搜索","description":"通用搜索接口，使用Elasticsearch进行检索，不带向量检索和重排，适用于快速搜索。","operationId":"search_general_endpoint_api_knowledge_search_general_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"platform","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"平台筛选，多个用逗号分隔","title":"Platform"},"description":"平台筛选，多个用逗号分隔"},{"name":"page","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"分页页码","default":1,"title":"Page"},"description":"分页页码"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"每页结果数","default":10,"title":"Page Size"},"description":"每页结果数"},{"name":"max_content_length","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"内容最大长度","default":300,"title":"Max Content Length"},"description":"内容最大长度"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/suggestion":{"get":{"tags":["knowledge"],"summary":"获取搜索建议","description":"搜索建议","operationId":"get_search_suggest_api_knowledge_suggestion_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"返回结果数量","default":5,"title":"Page Size"},"description":"返回结果数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/search-wxapp":{"get":{"tags":["knowledge"],"summary":"小程序搜索接口，使用MySQL进行检索，适用于小程序搜索","description":"小程序搜索接口，使用MySQL进行检索，适用于小程序搜索","operationId":"search_wxapp_endpoint_api_knowledge_search_wxapp_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","description":"搜索关键词","title":"Query"},"description":"搜索关键词"},{"name":"search_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"搜索类型: all, post, user","default":"all","title":"Search Type"},"description":"搜索类型: all, post, user"},{"name":"page","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"每页记录数量","default":10,"title":"Page Size"},"description":"每页记录数量"},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"排序方式: time(时间), relevance(相关度)","default":"time","title":"Sort By"},"description":"排序方式: time(时间), relevance(相关度)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/history":{"get":{"tags":["knowledge"],"summary":"获取当前用户搜索历史","operationId":"get_search_history_endpoint_api_knowledge_history_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"返回结果数量","default":10,"title":"Page Size"},"description":"返回结果数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/history/clear":{"post":{"tags":["knowledge"],"summary":"清空当前用户搜索历史","operationId":"clear_search_history_endpoint_api_knowledge_history_clear_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/knowledge/hot":{"get":{"tags":["knowledge"],"summary":"获取热门搜索","description":"获取热门搜索词条（公开接口）","operationId":"get_hot_searches_endpoint_api_knowledge_hot_get","parameters":[{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"返回结果数量","default":10,"title":"Page Size"},"description":"返回结果数量"},{"name":"days","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"查询最近N天的数据","default":7,"title":"Days"},"description":"查询最近N天的数据"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/snapshot":{"get":{"tags":["knowledge"],"summary":"Get Snapshot Endpoint","description":"获取指定URL的网页快照","operationId":"get_snapshot_endpoint_api_knowledge_snapshot_get","parameters":[{"name":"url","in":"query","required":true,"schema":{"type":"string","description":"要获取快照的原始URL","title":"Url"},"description":"要获取快照的原始URL"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/recommend":{"get":{"tags":["knowledge"],"summary":"获取热门和最新帖子","description":"获取热门和最新帖子","operationId":"recommend_endpoint_api_knowledge_recommend_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"每类帖子的数量限制","default":20,"title":"Limit"},"description":"每类帖子的数量限制"},{"name":"hot_weight","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"热度权重","default":0.7,"title":"Hot Weight"},"description":"热度权重"},{"name":"new_weight","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"新度权重","default":0.3,"title":"New Weight"},"description":"新度权重"},{"name":"enable_ai_recommendation","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"是否启用AI智能推荐","default":true,"title":"Enable Ai Recommendation"},"description":"是否启用AI智能推荐"},{"name":"days","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"查询最近N天的数据","default":7,"title":"Days"},"description":"查询最近N天的数据"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/insight":{"get":{"tags":["knowledge","Knowledge"],"summary":"获取结构化洞察列表","description":"分页获取结构化的洞察信息。\n- 支持按 **分类** 和 **日期** 进行筛选。\n- 返回结果按日期倒序排列。","operationId":"get_insight_api_knowledge_insight_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":100,"minimum":1},{"type":"null"}],"description":"每页数量","default":10,"title":"Page Size"},"description":"每页数量"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"按分类筛选，例如：官方, 社区, 集市","title":"Category"},"description":"按分类筛选，例如：官方, 社区, 集市"},{"name":"date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"按日期筛选 (格式 YYYY-MM-DD)。不提供则默认为今天。若需获取所有日期的洞察，请传入 'all'。","title":"Date"},"description":"按日期筛选 (格式 YYYY-MM-DD)。不提供则默认为今天。若需获取所有日期的洞察，请传入 'all'。"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/rag":{"post":{"tags":["agent"],"summary":"Rag Endpoint","description":"智谱AI rag 检索增强生成接口","operationId":"rag_endpoint_api_agent_rag_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RagRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/agent/chat/completions":{"post":{"tags":["agent"],"summary":"通用对话（Zhipu GLM-4.5-AirX）","operationId":"completions_api_agent_chat_completions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCompletionsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/agent/status":{"get":{"tags":["agent"],"summary":"Get Agent Status","description":"获取agent状态","operationId":"get_agent_status_api_agent_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/agent/text/polish":{"post":{"tags":["agent","agent-text"],"summary":"文本润色","description":"对输入文本进行润色，支持不同风格。","operationId":"text_polish_endpoint_api_agent_text_polish_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TextPolishRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agent/text/summarize":{"post":{"tags":["agent","agent-text"],"summary":"文本摘要","description":"对输入文本进行摘要。","operationId":"text_summarize_endpoint_api_agent_text_summarize_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TextSummarizeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/auth/login":{"post":{"tags":["wxapp","wxapp-auth"],"summary":"微信小程序登录","description":"使用小程序端获取的code进行登录，返回JWT和用户信息。","operationId":"login_for_access_token_api_wxapp_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WeappLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/profile":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取用户公开信息","description":"获取指定用户的公开信息，包括统计数据。\n如果提供了当前登录用户的JWT，还会返回关注状态。","operationId":"get_user_profile_api_wxapp_user_profile_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","description":"要查询的用户ID","title":"User Id"},"description":"要查询的用户ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/my/profile":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取当前登录用户的完整信息","description":"获取当前登录用户的完整个人信息，用于\"我的\"页面或编辑页。\n直接返回依赖注入的用户对象，无需额外查询。","operationId":"get_my_profile_api_wxapp_user_my_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/user/update":{"post":{"tags":["wxapp","wxapp-user"],"summary":"更新用户信息","description":"更新当前登录用户的信息。","operationId":"update_user_profile_api_wxapp_user_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/user/list":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取用户列表","description":"获取用户列表，支持分页、搜索和排序。","operationId":"get_user_list_api_wxapp_user_list_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}},{"name":"nickname","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"按昵称搜索","title":"Nickname"},"description":"按昵称搜索"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"排序方式: latest, popular","default":"latest","title":"Sort By"},"description":"排序方式: latest, popular"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/followers":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取指定用户的粉丝列表","description":"获取指定用户的粉丝列表。","operationId":"get_followers_api_wxapp_user_followers_get","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","description":"目标用户的ID","title":"User Id"},"description":"目标用户的ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/following":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取指定用户的关注列表","description":"获取指定用户正在关注的用户列表。","operationId":"get_following_api_wxapp_user_following_get","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","description":"目标用户的ID","title":"User Id"},"description":"目标用户的ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/me/followers":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取我的粉丝列表","description":"获取当前登录用户的粉丝列表。","operationId":"get_my_followers_api_wxapp_user_me_followers_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/me/following":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取我的关注列表","description":"获取当前登录用户正在关注的用户列表。","operationId":"get_my_following_api_wxapp_user_me_following_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/favorite":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取用户的收藏列表","description":"获取当前用户收藏的所有内容。\n目前仅支持收藏的帖子(post)。","operationId":"get_user_favorites_api_wxapp_user_favorite_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","description":"每页数量","default":10,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/like":{"get":{"tags":["wxapp","wxapp-user"],"summary":"Get User Likes","description":"获取当前用户点赞过的内容，目前只支持帖子","operationId":"get_user_likes_api_wxapp_user_like_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","description":"每页数量","default":10,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/comment":{"get":{"tags":["wxapp","wxapp-user"],"summary":"Get User Comments","description":"获取当前用户发布的所有评论，包含父评论信息","operationId":"get_user_comments_api_wxapp_user_comment_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","description":"每页数量","default":10,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/user/sync":{"post":{"tags":["wxapp","wxapp-user"],"summary":"同步用户信息(兼容旧版,已废弃)","description":"兼容旧版接口，登录逻辑已迁移至 /login","operationId":"sync_user_info_api_wxapp_user_sync_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/wxapp/user/status":{"get":{"tags":["wxapp","wxapp-user"],"summary":"获取用户关系状态","description":"获取当前登录用户与目标用户的关系状态（是否互相关注等）","operationId":"get_user_status_api_wxapp_user_status_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"target_user_id","in":"query","required":true,"schema":{"type":"integer","description":"目标用户ID","title":"Target User Id"},"description":"目标用户ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/post/create":{"post":{"tags":["wxapp","wxapp-post"],"summary":"创建新帖子","description":"创建帖子","operationId":"create_post_api_wxapp_post_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePostRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/post/detail":{"get":{"tags":["wxapp","wxapp-post"],"summary":"获取帖子详情","description":"获取帖子详情，包括作者信息和当前用户的互动状态","operationId":"get_post_detail_api_wxapp_post_detail_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"query","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/post/list":{"get":{"tags":["wxapp","wxapp-post"],"summary":"获取帖子列表","description":"获取帖子列表，支持分类、排序、收藏、关注等筛选","operationId":"get_posts_api_wxapp_post_list_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"排序方式: latest, popular","default":"latest","title":"Sort By"},"description":"排序方式: latest, popular"},{"name":"favorite","in":"query","required":false,"schema":{"type":"boolean","description":"是否只看收藏","default":false,"title":"Favorite"},"description":"是否只看收藏"},{"name":"following","in":"query","required":false,"schema":{"type":"boolean","description":"是否只看关注","default":false,"title":"Following"},"description":"是否只看关注"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/post/update":{"post":{"tags":["wxapp","wxapp-post"],"summary":"更新帖子","description":"更新帖子信息","operationId":"update_post_api_wxapp_post_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePostRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/post/delete":{"post":{"tags":["wxapp","wxapp-post"],"summary":"删除帖子","description":"删除帖子（逻辑删除）","operationId":"delete_post_api_wxapp_post_delete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeletePostRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/post/search":{"get":{"tags":["wxapp","wxapp-post"],"summary":"Search Posts","description":"根据关键词等条件搜索帖子","operationId":"search_posts_api_wxapp_post_search_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"keywords","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"搜索关键词","title":"Keywords"},"description":"搜索关键词"},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"分类ID","title":"Category Id"},"description":"分类ID"},{"name":"min_likes","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"最小点赞数","title":"Min Likes"},"description":"最小点赞数"},{"name":"max_likes","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"最大点赞数","title":"Max Likes"},"description":"最大点赞数"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"每页数量","default":10,"title":"Limit"},"description":"每页数量"},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","description":"排序方式","default":"create_time DESC","title":"Order By"},"description":"排序方式"},{"name":"favorite","in":"query","required":false,"schema":{"type":"boolean","description":"是否只看收藏","default":false,"title":"Favorite"},"description":"是否只看收藏"},{"name":"following","in":"query","required":false,"schema":{"type":"boolean","description":"是否只看关注","default":false,"title":"Following"},"description":"是否只看关注"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/post/status":{"get":{"tags":["wxapp","wxapp-post"],"summary":"Get Post Status","description":"获取帖子的状态，如点赞、收藏等","operationId":"get_post_status_api_wxapp_post_status_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"query","required":true,"schema":{"type":"string","description":"帖子ID，多个ID用逗号分隔","title":"Post Id"},"description":"帖子ID，多个ID用逗号分隔"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/upload/image":{"post":{"tags":["wxapp","wxapp-upload"],"summary":"上传单个图片","description":"上传单个图片文件。\n- 需要用户认证。\n- 文件将被压缩并保存。\n- 返回图片的公开访问URL。","operationId":"upload_single_image_api_wxapp_upload_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_single_image_api_wxapp_upload_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/notification/list":{"get":{"tags":["wxapp","wxapp-notification"],"summary":"获取通知列表","description":"获取当前用户的通知列表，并附带发送者信息，按时间倒序排列。","operationId":"get_notifications_api_wxapp_notification_list_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"每页数量","default":10,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/notification/unread-count":{"get":{"tags":["wxapp","wxapp-notification"],"summary":"获取未读通知数量","description":"获取用户未读通知的总数。","operationId":"get_unread_notification_count_api_wxapp_notification_unread_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/notification/read":{"post":{"tags":["wxapp","wxapp-notification"],"summary":"标记通知为已读","description":"将一个或多个通知标记为已读。","operationId":"mark_as_read_api_wxapp_notification_read_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarkReadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/notification/read-all":{"post":{"tags":["wxapp","wxapp-notification"],"summary":"全部标记为已读","description":"将当前用户的所有未读通知标记为已读。","operationId":"mark_all_as_read_api_wxapp_notification_read_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/notification/delete":{"post":{"tags":["wxapp","wxapp-notification"],"summary":"删除通知","description":"逻辑删除单条通知。","operationId":"delete_notification_api_wxapp_notification_delete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteNotificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/notification/summary":{"get":{"tags":["wxapp","wxapp-notification"],"summary":"获取通知摘要","description":"获取未读通知摘要，包含总览和分类计数。","operationId":"get_notification_summary_api_wxapp_notification_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/feedback/create":{"post":{"tags":["wxapp","wxapp-feedback"],"summary":"创建用户反馈","description":"创建一条新的用户反馈。\n- 如果用户已登录，将自动记录 user_id。\n- 如果用户未登录，则作为匿名反馈提交。","operationId":"create_feedback_api_wxapp_feedback_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateFeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/feedback/my/list":{"get":{"tags":["wxapp","wxapp-feedback"],"summary":"获取我的反馈列表","description":"获取当前登录用户的反馈列表","operationId":"get_my_feedback_list_api_wxapp_feedback_my_list_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/about":{"get":{"tags":["wxapp","wxapp-about"],"summary":"获取关于信息","description":"获取\"关于我们\"页面的信息，通常是静态配置。","operationId":"get_about_info_api_wxapp_about_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/wxapp/action/toggle":{"post":{"tags":["wxapp","wxapp-action"],"summary":"通用点赞/收藏/关注操作","description":"通用切换操作：点赞/取消点赞、收藏/取消收藏、关注/取消关注。","operationId":"toggle_action_api_wxapp_action_toggle_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActionToggleRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/banwords/library":{"get":{"tags":["wxapp","wxapp-banwords"],"summary":"获取违禁词库","description":"获取所有违禁词分类及其下的词汇。这是一个公开接口。","operationId":"get_banwords_library_api_wxapp_banwords_library_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/wxapp/banwords/categories":{"get":{"tags":["wxapp","wxapp-banwords"],"summary":"获取违禁词分类","description":"获取所有违禁词的分类列表。这是一个公开接口。","operationId":"get_banword_categories_api_wxapp_banwords_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/wxapp/banwords/category":{"post":{"tags":["wxapp","wxapp-banwords"],"summary":"创建新分类 (管理员)","description":"创建一个新的违禁词分类。","operationId":"create_category_api_wxapp_banwords_category_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/banwords/words":{"post":{"tags":["wxapp","wxapp-banwords"],"summary":"向分类中批量添加违禁词 (管理员)","description":"向一个分类中批量添加多个违禁词。","operationId":"add_words_to_category_api_wxapp_banwords_words_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddWordsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/banwords/word":{"delete":{"tags":["wxapp","wxapp-banwords"],"summary":"从分类中删除违禁词 (管理员)","description":"从一个分类中删除一个指定的违禁词。","operationId":"delete_word_from_category_api_wxapp_banwords_word_delete","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteWordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/comment/detail":{"get":{"tags":["wxapp","wxapp-comment"],"summary":"获取单条评论详情","description":"获取评论详情","operationId":"get_comment_detail_api_wxapp_comment_detail_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_id","in":"query","required":true,"schema":{"type":"string","title":"Comment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/comment/status":{"get":{"tags":["wxapp","wxapp-comment"],"summary":"Get Comment Status","description":"获取评论状态","operationId":"get_comment_status_api_wxapp_comment_status_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_id","in":"query","required":true,"schema":{"type":"string","description":"评论ID列表，用逗号分隔","title":"Comment Id"},"description":"评论ID列表，用逗号分隔"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/comment/replies":{"get":{"tags":["wxapp","wxapp-comment"],"summary":"获取单条评论的回复列表","description":"获取单条评论的回复列表，分页展示","operationId":"get_replies_api_wxapp_comment_replies_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"comment_id","in":"query","required":true,"schema":{"type":"string","title":"Comment Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/comment/delete":{"post":{"tags":["wxapp","wxapp-comment"],"summary":"删除评论","description":"删除评论","operationId":"delete_comment_api_wxapp_comment_delete_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Body"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/comment/update":{"post":{"tags":["wxapp","wxapp-comment"],"summary":"Update Comment","description":"更新评论","operationId":"update_comment_api_wxapp_comment_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCommentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/wxapp/comment/list":{"get":{"tags":["wxapp","wxapp-comment"],"summary":"获取评论列表","description":"获取指定资源的评论列表，分页展示，并包含每个评论的点赞状态","operationId":"get_comments_api_wxapp_comment_list_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"resource_id","in":"query","required":true,"schema":{"type":"integer","description":"资源ID (例如帖子ID)","title":"Resource Id"},"description":"资源ID (例如帖子ID)"},{"name":"resource_type","in":"query","required":false,"schema":{"type":"string","description":"资源类型","default":"post","title":"Resource Type"},"description":"资源类型"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/comment/user":{"get":{"tags":["wxapp","wxapp-comment"],"summary":"获取用户的评论列表","description":"获取指定用户发表的所有评论，并附带当前用户的点赞状态","operationId":"get_user_comments_api_wxapp_comment_user_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"integer","description":"目标用户的ID","title":"User Id"},"description":"目标用户的ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wxapp/comment/create":{"post":{"tags":["wxapp","wxapp-comment"],"summary":"发布评论","description":"发布评论或回复。\n- 如果`parent_id`为空，则为对资源的直接评论。\n- 如果`parent_id`不为空，则为对另一条评论的回复。","operationId":"create_comment_api_wxapp_comment_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/dbpool/status":{"get":{"tags":["admin"],"summary":"获取数据库连接池状态","description":"获取 aiomysql 数据库连接池的状态信息。","operationId":"get_db_pool_status_api_admin_dbpool_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"健康检查端点，返回服务状态","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActionToggleRequest":{"properties":{"target_id":{"type":"string","title":"Target Id","description":"目标资源ID或用户ID"},"target_type":{"type":"string","title":"Target Type","description":"目标类型: post/comment/user"},"action_type":{"type":"string","title":"Action Type","description":"动作类型: like/favorite/follow"}},"type":"object","required":["target_id","target_type","action_type"],"title":"ActionToggleRequest"},"AddWordsRequest":{"properties":{"category_id":{"type":"integer","title":"Category Id"},"words":{"items":{"type":"string"},"type":"array","title":"Words"}},"type":"object","required":["category_id","words"],"title":"AddWordsRequest"},"Body_upload_single_image_api_wxapp_upload_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_single_image_api_wxapp_upload_image_post"},"ChatCompletionsRequest":{"properties":{"query":{"type":"string","title":"Query","description":"用户输入的查询"},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","description":"是否流式返回","default":false},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id","description":"会话ID，用于多轮对话"}},"type":"object","required":["query"],"title":"ChatCompletionsRequest","description":"通用对话请求体"},"CreateCategoryRequest":{"properties":{"name":{"type":"string","title":"Name"},"default_risk":{"type":"integer","title":"Default Risk","default":3}},"type":"object","required":["name"],"title":"CreateCategoryRequest"},"CreateCommentRequest":{"properties":{"resource_id":{"type":"integer","title":"Resource Id"},"resource_type":{"type":"string","title":"Resource Type"},"content":{"type":"string","title":"Content"},"parent_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Parent Id"},"image":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image"}},"type":"object","required":["resource_id","resource_type","content"],"title":"CreateCommentRequest"},"CreateFeedbackRequest":{"properties":{"content":{"type":"string","title":"Content"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"contact":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version"},"image":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image"},"device_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Device Info"}},"type":"object","required":["content"],"title":"CreateFeedbackRequest"},"CreatePostRequest":{"properties":{"title":{"type":"string","title":"Title"},"content":{"type":"string","title":"Content"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id","default":1},"allow_comment":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Allow Comment","default":false},"is_public":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Public","default":false},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"wechatId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wechatid"},"qqId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qqid"},"image":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image"},"tag":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tag"},"location":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Location"}},"type":"object","required":["title","content"],"title":"CreatePostRequest"},"DeleteNotificationRequest":{"properties":{"notification_id":{"type":"integer","title":"Notification Id"}},"type":"object","required":["notification_id"],"title":"DeleteNotificationRequest"},"DeletePostRequest":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id"},"post_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Post Id"}},"type":"object","title":"DeletePostRequest"},"DeleteWordRequest":{"properties":{"category_id":{"type":"integer","title":"Category Id"},"word":{"type":"string","title":"Word"}},"type":"object","required":["category_id","word"],"title":"DeleteWordRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MarkReadRequest":{"properties":{"notification_ids":{"items":{"type":"integer"},"type":"array","title":"Notification Ids","description":"通知ID列表"}},"type":"object","required":["notification_ids"],"title":"MarkReadRequest"},"RagRequest":{"properties":{"query":{"type":"string","title":"Query","description":"用户输入的查询"},"platform":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Platform","description":"要检索的平台，'all'或不传表示所有平台"},"max_results":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Results","description":"返回的最大结果数","default":10},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format","description":"响应格式 ('markdown' 或 'json')","default":"markdown"},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","description":"是否流式返回","default":false},"rewrite_query":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Rewrite Query","description":"是否对查询进行改写以增强检索效果","default":false}},"type":"object","required":["query"],"title":"RagRequest","description":"RAG请求体"},"RerankStrategy":{"type":"string","enum":["no_rerank","bge_reranker","st_reranker","pagerank_only","personalized"],"title":"RerankStrategy","description":"重排序策略枚举"},"RetrievalStrategy":{"type":"string","enum":["vector_only","bm25_only","hybrid","es_only","auto"],"title":"RetrievalStrategy","description":"检索策略枚举"},"TextPolishRequest":{"properties":{"text":{"type":"string","title":"Text","description":"需要润色的文本"},"mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mode","description":"润色风格 ('professional', 'casual', 'academic', 'shorten')","default":"professional"},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","description":"是否流式返回","default":false}},"type":"object","required":["text"],"title":"TextPolishRequest","description":"文本润色请求体"},"TextSummarizeRequest":{"properties":{"text":{"type":"string","title":"Text","description":"需要摘要的文本"},"length":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Length","description":"摘要长度 ('short', 'medium', 'long')","default":"medium"},"stream":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Stream","description":"是否流式返回","default":false}},"type":"object","required":["text"],"title":"TextSummarizeRequest","description":"文本摘要请求体"},"UpdateCommentRequest":{"properties":{"id":{"type":"integer","title":"Id"},"content":{"type":"string","title":"Content"}},"type":"object","required":["id","content"],"title":"UpdateCommentRequest"},"UpdatePostRequest":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id"},"post_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Post Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"image":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"},"tag":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tag"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"wechatId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wechatid"},"qqId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qqid"},"allow_comment":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Allow Comment"},"is_public":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Public"},"location":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Location"},"url_link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url Link"}},"type":"object","title":"UpdatePostRequest"},"UpdateUserRequest":{"properties":{"nickname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nickname"},"avatar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar"},"gender":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Gender"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Province"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"birthday":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birthday"},"wechatId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wechatid"},"qqId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qqid"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"university":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"University"},"status":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status"}},"type":"object","title":"UpdateUserRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WeappLoginRequest":{"properties":{"code":{"type":"string","title":"Code"},"userInfo":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Userinfo"}},"type":"object","required":["code"],"title":"WeappLoginRequest"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/wxapp/auth/login"}}}}}}