<view class="comment-item" wx:if="{{formattedComment}}">
  <view class="comment-header">
    <!-- 使用post-item的头像容器和icon组件方式 -->
    <view class="avatar-container" bindtap="onTapUser">
      <icon 
        wx:if="{{formattedComment.avatar}}"
        useImage="{{true}}"
        imageSrc="{{formattedComment.avatar}}"
        size="64"
        class="avatar-icon"
        binderror="onAvatarError">
      </icon>
      <icon 
        wx:else
        name="profile"
        size="64"
        color="#6369e8"
        class="avatar-icon">
      </icon>
    </view>
    
    <view class="user-info">
      <view class="nickname" bindtap="onTapUser">{{formattedComment.nickname || '匿名用户'}}</view>
      <view class="content-area">
        <text class="text">{{formattedComment.content}}</text>
      </view>
      
      <!-- 图片展示区 -->
      <view wx:if="{{formattedComment.image && formattedComment.image.length > 0}}" class="image-container">
        <block wx:for="{{formattedComment.image}}" wx:key="*this">
          <image class="content-image" src="{{item}}" mode="aspectFill" bindtap="onPreviewImage" data-current="{{item}}"></image>
        </block>
      </view>
    </view>
  </view>
  
  <!-- 底部操作区 - 移到外层，与post-item保持一致 -->
  <view class="action-bar">
    <text class="time">{{formattedComment.create_time_formatted}}</text>
    <view class="action-buttons">
      <view class="action-icon {{formattedComment.isLiked ? 'liked' : ''}}" bindtap="onTapLike">
        <icon name="{{formattedComment.isLiked ? 'like-active' : 'like'}}" size="20" color="{{formattedComment.isLiked ? '#ff6b6b' : '#666'}}"></icon>
      </view>
      <view class="action-icon" bindtap="onTapReply">
        <icon name="comment" size="20" color="#666"></icon>
      </view>
      <view wx:if="{{formattedComment.isOwner}}" class="action-icon" bindtap="onTapDelete">
        <icon name="clear" size="20" color="#666"></icon>
      </view>
    </view>
  </view>
</view> 