<!-- index.wxml -->

<view class="container">
  <!-- 自定义导航栏 -->
  <nav-bar 
    showLogo="{{true}}"
    hasUnread="{{hasUnreadNotification}}"
    bind:notification="onNotificationTap"
    bind:avatar="onAvatarTap"
  ></nav-bar>

  <!-- 搜索框 - 使用简单的input避免重复 -->
  <view class="search-box">
    <view class="search-input-wrapper">
      <icon name="search" size="32" color="#999999"></icon>
      <input class="search-input" placeholder="搜索话题" confirm-type="search" bindinput="onSearchInput" bindconfirm="handleSearch" value="{{searchValue}}"/>
    </view>
  </view>

  <!-- 自定义水平布局分类导航 -->
  <view class="category-scroll">
    <view class="category-list">
      <view 
        class="category-item {{categoryId === item.category_id ? 'active' : ''}}" 
        wx:for="{{navItems}}" 
        wx:key="category_id" 
        data-index="{{item.category_id}}"
        bindtap="onTabChange"
      >
        <icon name="{{item.tag}}" size="60" color="{{categoryId === item.category_id ? '#1aad19' : '#666666'}}"></icon>
        <text class="category-text">{{item.text}}</text>
      </view>
    </view>
  </view>

  <!-- 内容列表 - 使用post-list组件 -->
  <view class="post-list-container">
    <post-list 
      filter="{{filter}}"
      bind:retry="onRetry"
    />
  </view>
  
  <!-- 悬浮发帖按钮 -->
  <view class="floating-button" bindtap="onCreatePost">
    <icon name="add" size="56" color="#ffffff"></icon>
  </view>
</view>