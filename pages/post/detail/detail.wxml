<!-- 安全区域占位 -->
<view class="safe-area-top" style="height: {{statusBarHeight}}px;"></view>

<!-- 使用nav-bar组件 -->
<nav-bar 
  nav-title="{{postData.post.title || '帖子详情'}}"
  allow-back="{{true}}"
  nav-buttons="{{navButtons}}"
></nav-bar>

<!-- 帖子详情页 -->
<view class="container">
  <!-- 使用cell-status组件 -->
  <cell-status
    loading="{{isPostLoading}}"
    error="{{!!loadError}}"
    errorMsg="{{loadError}}"
    bindretry="handleRetry">

    <!-- 内容区域 -->
    <block wx:if="{{postDetail && !isPostLoading && !loadError}}">
      <!-- 帖子详情 -->
      <post-item 
        post="{{postDetail}}" 
        class="post-detail"
        detail-page="{{true}}"
        show-action="{{true}}"
        bind:postDeleted="onPostDeleted">
      </post-item>

      <!-- 评论区域 -->
      <comment-list 
        id="commentList"
        post-id="{{postDetail.id}}">
      </comment-list>
    </block>
  </cell-status>

  <!-- 底部安全区域，为输入框腾出空间 -->
  <view class="bottom-safe-area" style="height: 70px;"></view>
</view>

<!-- WEUI组件 -->
<mp-toptips msg="{{toptips.msg}}" type="{{toptips.type}}" show="{{toptips.show}}"></mp-toptips>
<mp-dialog title="{{dialog.title}}" show="{{dialog.show}}" buttons="{{dialog.buttons}}"></mp-dialog> 