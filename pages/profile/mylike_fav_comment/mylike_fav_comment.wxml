<!-- 顶部标题栏和标签栏 -->
<nav-tab-bar
  title="{{pageTitle}}"
  show-back="{{true}}"
  tab-titles="{{tabTitles}}"
  active-tab="{{tabIndex}}"
  bind:change="switchTab"
/>

<view class="container">
  <!-- 导航栏 -->
  <nav-bar title="{{pageTitle}}" back></nav-bar>

  <!-- 内容区域 -->
  <view class="content-area">
    <!-- 标签页 -->
    <view class="tab-container">
      <view class="tabs">
        <view 
          wx:for="{{tabs}}" 
          wx:key="id"
          class="tab {{activeTab === index ? 'active' : ''}}" 
          data-index="{{index}}" 
          bindtap="onTabChange"
        >
          <text>{{item.title}}</text>
          <view class="tab-indicator" wx:if="{{activeTab === index}}"></view>
        </view>
      </view>
    </view>

    <!-- 使用cell-status组件 -->
    <cell-status
      loading="{{loading}}"
      error="{{error}}"
      errorMsg="{{errorMsg}}"
      bindretry="onRetry">

      <!-- 切换内容区域 -->
      <view class="tab-content">
        <!-- 点赞记录 -->
        <post-list
          wx:if="{{activeTab === 0}}"
          posts="{{likes}}"
          loading="{{loading}}"
          error="{{error}}"
          empty="{{!loading && !error && likes.length === 0}}"
          emptyText="暂无点赞记录"
          hasMore="{{hasMore}}"
          bind:postTap="onPostTap"
          bind:loadMore="onLoadMore"
        ></post-list>

        <!-- 收藏记录 -->
        <post-list
          wx:if="{{activeTab === 1}}"
          posts="{{favorites}}"
          loading="{{loading}}"
          error="{{error}}"
          empty="{{!loading && !error && favorites.length === 0}}"
          emptyText="暂无收藏记录"
          hasMore="{{hasMore}}"
          bind:postTap="onPostTap"
          bind:loadMore="onLoadMore"
        ></post-list>

        <!-- 评论记录 -->
        <comment-list
          wx:if="{{activeTab === 2}}"
          comments="{{comments}}"
          loading="{{loading}}"
          error="{{error}}"
          empty="{{!loading && !error && comments.length === 0}}"
          emptyText="暂无评论记录"
          hasMore="{{hasMore}}"
          bind:commentTap="onCommentTap"
          bind:loadMore="onLoadMore"
        ></comment-list>
      </view>
    </cell-status>
  </view>

  <!-- 顶部通知 -->
  <mp-toptips msg="{{toptipsMsg}}" type="{{toptipsType}}" show="{{toptipsShow}}"></mp-toptips>
</view> 
