<view class="login-container">
  <!-- 全屏加载遮罩 -->
  <view class="loading-mask" wx:if="{{loginLoading}}">
    <view class="loading-full-content">
      <!-- 标题部分 -->
      <view class="header">
        <image class="logo" src="/assets/icons/logo.png" mode="aspectFit"></image>
        <text class="title">南开Wiki</text>
        <text class="subtitle">校园知识共享平台</text>
      </view>
      
      <!-- 加载动画部分 -->
      <view class="loading-content {{loginSuccess ? 'loading-success' : ''}}">
        <view class="loading-dots">
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
        </view>
        <text class="loading-text-large">{{loginSuccess ? '登录成功，正在跳转...' : '登录中...'}}</text>
      </view>
    </view>
  </view>

  <!-- 原始登录内容，在loading时隐藏 -->
  <block wx:if="{{!loginLoading}}">
    <view class="header">
      <image class="logo" src="/assets/icons/logo.png" mode="aspectFit"></image>
      <text class="title">南开Wiki</text>
      <text class="subtitle">校园知识共享平台</text>
    </view>

    <view class="login-form">
      <button 
        class="login-btn wx-login-btn" 
        bindtap="handleWxLogin"
        disabled="{{loginLoading}}">
        <image class="wx-icon" src="/assets/icons/wechat.png"></image>
        微信账号登录
      </button>
    </view>

    <view class="footer">
      <text class="tips">登录即表示您同意平台的</text>
      <view class="links">
        <text class="link">用户协议</text>
        <text class="divider">和</text>
        <text class="link">隐私政策</text>
      </view>
    </view>
  </block>
</view> 